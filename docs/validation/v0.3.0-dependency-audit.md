# Dependency Audit for v0.3 PyPI Release

**Date**: 2025-10-10
**Goal**: Ensure sparkling dependency story for users

---

## Current State

### ✅ What Works Well

**Python Dependencies (auto-installed by pip/uv)**:
```python
dependencies = [
    "typer>=0.9.0",      # CLI framework
    "rich>=13.0.0",      # Beautiful terminal output
    "pyyaml>=6.0.0",     # Manifest parsing
]
```
- ✅ All runtime deps are pure Python (no C extensions, no platform issues)
- ✅ Version pins are reasonable (`>=` allows bug fixes)
- ✅ Small dependency footprint (only 3 packages)

**Python Version Check**:
- ✅ `requires-python = ">=3.11"` in pyproject.toml
- ✅ pip/uv automatically refuses to install if Python < 3.11
- ✅ Clear error message to user

**Spec-Kit Detection**:
- ✅ `is_spec_kit_project()` checks for `.specify/`, `.claude/`, or `.github/prompts/`
- ✅ Clear error message: "does not appear to be a spec-kit project!"
- ✅ Helpful hint: "Looking for one of: .specify/, .claude/, or .github/prompts/"

---

## User Dependency Chain

### What Users Need (in order):

1. **Python 3.11+** ✅
   - **Check**: Automatic by pip/uv
   - **Error**: "Python 3.11+ required"
   - **Action**: User installs Python

2. **pip or uv** ✅
   - **Check**: N/A (needed to install lite-kits)
   - **Error**: N/A
   - **Action**: User installs pip (comes with Python) or uv

3. **lite-kits** ✅
   - **Install**: `pip install lite-kits` or `uv tool install lite-kits`
   - **Auto-installs**: typer, rich, pyyaml
   - **Action**: Single command

4. **spec-kit** ✅ (REQUIRED)
   - **Check**: `is_spec_kit_project()` when running `lite-kits add`
   - **Error**: Clear message + install instructions
   - **Why required**: lite-kits is designed as an enhancement layer for GitHub spec-kit
   - **Install**: `npm install -g @github/spec-kit` (requires Node.js)

5. **AI Assistant** (GitHub Copilot, Claude Code, etc.) ❓
   - **Check**: None (we just install markdown prompt files)
   - **Error**: None
   - **Note**: Works with any AI assistant that reads slash commands (.md files)
   - Supported: GitHub Copilot (VSCode/CLI), Claude Code (VSCode), or compatible

---

## Potential Issues & Solutions

### Issue 1: User doesn't have spec-kit installed

**Current behavior**:
```
lite-kits add
→ Error: /path does not appear to be a spec-kit project!
→ Looking for one of: .specify/, .claude/, or .github/prompts/
```

**Problems**:
- ❌ Doesn't tell user HOW to install spec-kit (REQUIRED dependency)
- ❌ Doesn't link to spec-kit docs/repo
- ❌ Doesn't mention Node.js requirement

**Fix for v0.3**:
```python
ERROR_NOT_SPEC_KIT = "does not appear to be a spec-kit project!"
ERROR_SPEC_KIT_HINT = """
Looking for one of: .specify/, .claude/, or .github/prompts/

lite-kits enhances GitHub spec-kit projects. To get started:
  1. Install Node.js: https://nodejs.org/ (if not installed)
  2. Install spec-kit: npm install -g @github/spec-kit
  3. Initialize project: specify init my-project && cd my-project
  4. Add lite-kits enhancements: lite-kits add --recommended

Learn more: https://github.com/github/spec-kit
"""
```

### Issue 2: User doesn't understand AI assistant compatibility

**Current behavior**:
- We install markdown prompt files (.md)
- No explicit check for AI assistant (not needed - files work universally)

**Problems**:
- ❌ User might not understand these are slash commands for AI assistants
- ❌ No clear guidance on which assistants are supported
- ❌ Should mention GitHub Copilot first (native GitHub integration)

**Fix for v0.3**:
Add to installation summary:
```python
console.print("\n[bold cyan]Next steps:[/bold cyan]")
console.print("  1. Open this project in your AI assistant")
console.print("     (GitHub Copilot, Claude Code, or compatible)")
console.print("  2. Run: /orient (in your AI assistant)")
console.print("  3. Use slash commands: /commit, /pr, /review, etc.")
console.print("  4. Validate installation: lite-kits validate")
```

### Issue 3: README prerequisites could be clearer

**Current**:
```markdown
### Prerequisites

1. **Python 3.11+**
2. **A spec-kit project** - Initialize with [`specify init`](https://github.com/github/spec-kit)
3. **An AI assistant** - Claude Code, GitHub Copilot, or GitHub Copilot CLI
```

**Better for v0.3**:
```markdown
### Prerequisites

1. **Python 3.11+** - [Download here](https://www.python.org/downloads/)
2. **Node.js & npm** - Required to install spec-kit ([Download](https://nodejs.org/))
3. **spec-kit** - GitHub's spec-driven development framework (REQUIRED)
   ```bash
   npm install -g @github/spec-kit
   ```

### Installation

```bash
# 1. Initialize a spec-kit project
specify init my-project
cd my-project

# 2. Install lite-kits
pip install lite-kits
# or with uv (recommended)
uv tool install lite-kits

# 3. Add enhancement kits
lite-kits add --recommended

# 4. Use with your AI assistant
# Works with GitHub Copilot (VSCode/CLI), Claude Code (VSCode), or compatible assistants
# Run: /orient to get started
```

### AI Assistant Compatibility

lite-kits commands work with any AI assistant that supports slash commands:
- ✅ **GitHub Copilot** (VSCode extension or CLI)
- ✅ **Claude Code** (VSCode extension)
- ✅ Any assistant that reads `.md` prompt files

No additional installation required—commands are just markdown files that your AI assistant reads.
```

---

## Recommendations for v0.3

### HIGH Priority (Do for v0.3):

1. **✅ Improve error messages**
   - [ ] Better spec-kit not found error (include install instructions)
   - [ ] Better AI assistant guidance in next steps

2. **✅ Update README prerequisites**
   - [ ] Add links to all prerequisites
   - [ ] Show complete installation flow
   - [ ] Clarify what's auto-installed vs manual

3. **✅ Add dependency check command** (nice-to-have)
   - [ ] `lite-kits doctor` - Check all prerequisites
   - [ ] Report Python version, spec-kit presence, AI agent setup

### MEDIUM Priority (v0.4+):

4. **🔄 Integrate with spec-kit** (v0.4 feature)
   - [ ] `lite-kits init` - Auto-run `specify init` if available
   - [ ] Auto-detect spec-kit in PATH
   - [ ] Offer to install spec-kit if missing

5. **🔄 Better AI assistant detection**
   - [ ] Detect if .claude or .github is being used
   - [ ] Suggest which agent to install for

---

## Testing Checklist

Before PyPI publish, test these scenarios:

- [ ] Install on fresh Python 3.11 (should work)
- [ ] Install on Python 3.10 (should fail with clear message)
- [X] Run `lite-kits add` in non-spec-kit dir (should fail with helpful message)
- [X] Run `lite-kits add` in spec-kit dir (should work)
- [X] Verify all dependencies auto-install
- [X] Check error messages are helpful

---

## Summary

**Current grade**: B+ (works well, could be clearer)

**After v0.3 improvements**: A (sparkling!)

**Key improvements**:
1. Better error messages with actionable instructions
2. Clearer README with installation flow
3. Optional `doctor` command for debugging
